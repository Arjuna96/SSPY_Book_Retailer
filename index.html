<!DOCTYPE html>
<html lang="en">
<head>
    <meta name='viewport' content='width=device-width' />
    <meta charset="UTF-8">
    <title>Book Shelf by SSPY</title>
    <link rel="stylesheet" href="external/externalTheme.css"/>
    <link rel="stylesheet" href="themes/myTheme.css"/>
    <link rel="stylesheet" href="themes/jquery.mobile.icons.min.css"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="https://raw.github.com/HPNeo/gmaps/master/gmaps.js"></script>
</head>

<style>
    @font-face {
        font-family: "SanFrancisco";
        src: url("external/fonts/SF-UI-Text-Regular.otf");
        font-weight: normal;
        font-style: normal;
    }

    body {
        font-family: 'SanFrancisco';
        background-color: #000000;
    }
</style>

<body>

<div data-theme="e" id="nav-popup" style="height: 100%;">
    <div data-role="navbar" class="top-bar-menu">
        <ul>
            <li>
                <img class="logo-css" src="external/images/side-nav-logo.png" class="nav-logo">
            </li>
            <li>
                <a data-icon="power" href="#page0" class="float-right no-border" data-transition="flow"
                   style="padding-right: 30px;"></a>
            </li>
        </ul>
    </div>
    <div class="pad-m-l">
        <div class="mgn-l-t"><a href="#page1">
            <i class="glyphicon glyphicon-home pad-m-r"></i>
            Home
        </a>
        </div>
        <div class="mgn-l-t"><a href="#page2">
            <i class="glyphicon glyphicon-th pad-m-r"></i>
            Categories
        </a>
        </div>
        <div class="mgn-l-t"><a href="#page3">
            <i class="glyphicon glyphicon-heart pad-m-r"></i>
            Favourites
        </a>
        </div>
        <div class="mgn-l-t"><a href="#page4">
            <i class="glyphicon glyphicon-calendar pad-m-r"></i>
            Events</a>
        </div>
        <div class="mgn-l-t"><a href="#page10">
            <i class="glyphicon glyphicon-map-marker pad-m-r"></i>
            Event Details</a>
        </div>
        <div class="mgn-l-t"><a href="#page5">
            <i class="glyphicon glyphicon-shopping-cart pad-m-r"></i>
            My Cart</a>
        </div>
        <div class="mgn-l-t"><a href="#page6">
            <i class="glyphicon glyphicon-star pad-m-r"></i>
            Scan QR & My Loyalty</a>
        </div>
        <div class="mgn-l-t"><a href="#page7">
            <i class="glyphicon glyphicon-info-sign pad-m-r"></i>
            About Us</a>
        </div>
        <div class="mgn-l-t"><a href="#page8">
            <i class="glyphicon glyphicon-education pad-m-r"></i>
            Team</a>
        </div>
        <div class="mgn-l-t"><a href="#page16">
            <i class="glyphicon glyphicon-education pad-m-r"></i>
            Export Favourites</a>
        </div>
    </div>
</div>

<div data-role="page" id="page0" data-theme="e">
    <div data-role="main" id="login"></div>
</div>

<div data-role="page" id="page1" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>
    <div id="myCarousel" class="carousel slide" data-ride="carousel" style="width: 100%; height: 220px">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
            <div class="item active">
                <img src="external/images/events/e1.jpg" style="width: 100%; height: 220px" alt="event 3">
            </div>

            <div class="item">
                <img src="external/images/events/e2.jpg" style="width: 100%; height: 220px" alt="Event 2">
            </div>

            <div class="item">
                <img src="external/images/events/e3.jpg" style="width: 100%; height: 220px" alt="event 1">
            </div>

            <div class="item">
                <img src="external/images/events/e4.jpg" style="width: 100%; height: 220px" alt="event 1">
            </div>
        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div data-role="main" class="ui-content" style="height: calc(100% - 339px);" id="home"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page2" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>
    <div data-role="main" class="ui-content container" id="categories"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page3" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>
    <div data-role="main" class="ui-content container" id="favourites"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page4" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>
    <div data-role="main" class="ui-content container" id="events"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page5" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="my-cart"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page6" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="loyalty"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page7" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="about-us"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page8" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="team"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page9" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="order-detail"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page10" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="event-details"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page11" data-theme="e" class="full-height" data-url="map-page">
    <div nav-type="side-nav"></div>
    <h1 id="mapTitle" class="h-middle"></h1>
    <div data-role="main" class="ui-content container" id="map-canvas" style="height: 72%"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page12" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="book-category"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page13" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="event-fav"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page14" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="news-fav"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page15" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="team-fav"></div>
    <div nav-type="main-nav"></div>
</div>

<div data-role="page" id="page16" data-theme="e" class="full-height">
    <div nav-type="side-nav"></div>

    <div data-role="main" class="ui-content container" id="email"></div>
    <div nav-type="main-nav"></div>
</div>

<script>

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#login").load("login.html", function () {
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("[nav-type=main-nav]").load("main-navigation.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });


    $('[data-role=page]').on('pageinit', function (event, ui) {
        $("#" + event.target.id).find("[nav-type=side-nav]").load("side-navigation.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
            $("#side-nav-pop").show().trigger("updatelayout");
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#home").load("pages/home.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#favourites").load("pages/favourites.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#categories").load("pages/categories.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#events").load("pages/events.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#my-cart").load("pages/my-cart.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#team").load("pages/team.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#loyalty").load("pages/loyalty.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#about-us").load("pages/about-us.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#order-detail").load("pages/order-detail.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#event-details").load("pages/event-details.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#book-category").load("pages/book-category.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#event-fav").load("pages/event-fav.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#news-fav").load("pages/news-fav.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#team-fav").load("pages/team-fav.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $('[data-role=page]').on('pageshow', function (event, ui) {
        $("#" + event.target.id).find("#email").load("pages/email-fav.html", function () {
            $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });

    $(function () {
        $("#nav-popup").enhanceWithin().popup();
    });

    /*
     * Google Maps documentation: http://code.google.com/apis/maps/documentation/javascript/basics.html
     * Geolocation documentation: http://dev.w3.org/geo/api/spec-source.html
     */

    $( document ).on( "pageshow", "#page11", function() {
        $("#mapTitle").text(JSON.parse(localStorage.getItem('eventItem')).name);
        var eventDetails = JSON.parse(localStorage.getItem('eventItem'));
        var defaultLatLng = new google.maps.LatLng(34.0983425, -118.3267434);  // Default to Hollywood, CA when no geolocation support
//        if ( navigator.geolocation ) {
//            function success(pos) {
//                // Location found, show map with these coordinates
//                drawMap(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));
//            }
//            function fail(error) {
//                drawMap(defaultLatLng);  // Failed to find location, show default map
//            }
//            // Find the users current position.  Cache the location for 5 minutes, timeout after 6 seconds
//            navigator.geolocation.getCurrentPosition(success, fail, {maximumAge: 500000, enableHighAccuracy:true, timeout: 6000});
//        } else {
//            drawMap(defaultLatLng);  // No geolocation support, show default map
//        }
        drawMap(new google.maps.LatLng(parseFloat(eventDetails.latitude), parseFloat(eventDetails.longitude)));
        function drawMap(latlng) {
            var myOptions = {
                zoom: 10,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);
            // Add an overlay to the map of current lat/lng
            var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title: "Greetings!"
            });
        }
    });
</script>
</body>
</html>